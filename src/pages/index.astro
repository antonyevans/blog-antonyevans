---
import Layout from '../layouts/Layout.astro';
import SiteHeader from '../components/SiteHeader.astro';
import SiteFooter from '../components/SiteFooter.astro';
import PostCard from '../components/PostCard.astro';
import { getPublishedPosts } from '../lib/content';

const posts = await getPublishedPosts();
const latest = posts.slice(0, 3);
---

<Layout title="Anton Yevans | Blog" description="Essays and notes on engineering, product, and writing.">
  <SiteHeader />
  <main class="container home">
    <section class="hero surface">
      <p class="eyebrow">Independent blog</p>
      <h1>Engineering notes, product thinking, and practical writing.</h1>
      <p>I write about what I am building, what breaks, and what ends up working in production.</p>
      <p class="cta-row">
        <a class="chip" href="/blog/">Read the blog</a>
        <a class="chip" href="/about/">About me</a>
      </p>
    </section>

    <section>
      <div class="section-head">
        <h2>Latest posts</h2>
        <a href="/blog/">View all</a>
      </div>
      <div class="grid">
        {latest.map((post) => <PostCard post={post} />)}
      </div>
    </section>
  </main>
  <SiteFooter />
</Layout>

<style>
  .home { padding: 2rem 0; display: grid; gap: 2rem; }
  .hero { padding: clamp(1.2rem, 3vw, 2rem); }
  .eyebrow { margin: 0; text-transform: uppercase; letter-spacing: 0.08em; color: var(--muted); }
  h1 { margin: 0.5rem 0; font-size: clamp(2rem, 5vw, 3.3rem); max-width: 20ch; }
  .hero p { max-width: 58ch; color: var(--muted); }
  .cta-row { display: flex; gap: 0.6rem; }
  .section-head { display: flex; justify-content: space-between; align-items: baseline; }
  .section-head h2 { margin: 0; }
  .grid { display: grid; gap: 0.8rem; }
</style>
